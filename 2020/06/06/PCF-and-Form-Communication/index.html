<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="Communication, It&#39;s one of the single most important &quot;things&quot; in EVERYTHING! So why am I finding it so difficult to have my PCF control and Form script talk to each other? Maybe I am missing something">
<meta property="og:type" content="article">
<meta property="og:title" content="PCF &lt;-&gt; Form Communication">
<meta property="og:url" content="http://www.oliverflint.co.uk/2020/06/06/PCF-and-Form-Communication/index.html">
<meta property="og:site_name" content="A Blog by Oliver Flint">
<meta property="og:description" content="Communication, It&#39;s one of the single most important &quot;things&quot; in EVERYTHING! So why am I finding it so difficult to have my PCF control and Form script talk to each other? Maybe I am missing something">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://www.oliverflint.co.uk/2020/06/06/PCF-and-Form-Communication/custom-events.svg">
<meta property="article:published_time" content="2020-06-06T02:12:12.000Z">
<meta property="article:modified_time" content="2022-01-11T20:08:12.233Z">
<meta property="article:author" content="Oliver Flint">
<meta property="article:tag" content="D365">
<meta property="article:tag" content="PCF">
<meta property="article:tag" content="Power Apps">
<meta property="article:tag" content="Power Apps Component Framework">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.oliverflint.co.uk/2020/06/06/PCF-and-Form-Communication/custom-events.svg">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>PCF &lt;-&gt; Form Communication</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
      
<link rel="stylesheet" href="/css/rtl.css">

    
    <!-- rss -->
    
    
<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/rss.xml" title="A Blog by Oliver Flint" type="application/rss+xml">
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/categories/">Categories</a></li>
         
          <li><a href="/archives/">Archive</a></li>
         
          <li><a href="/Me/">Me</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2020/06/10/PCF-primary-entity-info/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2020/04/11/D365-Typescript-WebResources-Part-4/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://www.oliverflint.co.uk/2020/06/06/PCF-and-Form-Communication/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://www.oliverflint.co.uk/2020/06/06/PCF-and-Form-Communication/&text=PCF &lt;-&gt; Form Communication"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://www.oliverflint.co.uk/2020/06/06/PCF-and-Form-Communication/&title=PCF &lt;-&gt; Form Communication"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://www.oliverflint.co.uk/2020/06/06/PCF-and-Form-Communication/&is_video=false&description=PCF &lt;-&gt; Form Communication"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=PCF &lt;-&gt; Form Communication&body=Check out this article: http://www.oliverflint.co.uk/2020/06/06/PCF-and-Form-Communication/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://www.oliverflint.co.uk/2020/06/06/PCF-and-Form-Communication/&title=PCF &lt;-&gt; Form Communication"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://www.oliverflint.co.uk/2020/06/06/PCF-and-Form-Communication/&title=PCF &lt;-&gt; Form Communication"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://www.oliverflint.co.uk/2020/06/06/PCF-and-Form-Communication/&title=PCF &lt;-&gt; Form Communication"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://www.oliverflint.co.uk/2020/06/06/PCF-and-Form-Communication/&title=PCF &lt;-&gt; Form Communication"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://www.oliverflint.co.uk/2020/06/06/PCF-and-Form-Communication/&name=PCF &lt;-&gt; Form Communication&description=Communication, It&#39;s one of the single most important &#34;things&#34; in EVERYTHING! So why am I finding it so difficult to have my PCF control and Form script talk to each other? Maybe I am missing something but I believe the only &#34;OOTB&#34; method for the two to communicate is via a bound field/control...? So, here is my alternative..."><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://www.oliverflint.co.uk/2020/06/06/PCF-and-Form-Communication/&t=PCF &lt;-&gt; Form Communication"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Communication"><span class="toc-number">1.</span> <span class="toc-text">Communication</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#I-want-better-comms"><span class="toc-number">2.</span> <span class="toc-text">I want better comms!</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Here%E2%80%99s-what-I-came-up-with%E2%80%A6"><span class="toc-number">3.</span> <span class="toc-text">Here’s what I came up with…</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Custom-Events"><span class="toc-number">3.1.</span> <span class="toc-text">Custom Events</span></a></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        PCF &lt;-&gt; Form Communication
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Oliver Flint</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2020-06-06T02:12:12.000Z" itemprop="datePublished">2020-06-06</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/Power-Apps-Component-Framework/">Power Apps Component Framework</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/D365/" rel="tag">D365</a>, <a class="tag-link-link" href="/tags/PCF/" rel="tag">PCF</a>, <a class="tag-link-link" href="/tags/Power-Apps/" rel="tag">Power Apps</a>, <a class="tag-link-link" href="/tags/Power-Apps-Component-Framework/" rel="tag">Power Apps Component Framework</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h2 id="Communication"><a href="#Communication" class="headerlink" title="Communication"></a>Communication</h2><p>Communication, It’s one of the single most important “things” in EVERYTHING!</p>
<p>So why am I finding it so difficult to have my PCF control and Form script talk to each other? Maybe I am missing something but I believe the only “OOTB” method for the two to communicate is via a bound field/control…?</p>
<h2 id="I-want-better-comms"><a href="#I-want-better-comms" class="headerlink" title="I want better comms!"></a>I want better comms!</h2><p>Yep, I want a better way for my control and form to communicate without having to bind multiple fields and in some cases create new fields just to support this communication.</p>
<h2 id="Here’s-what-I-came-up-with…"><a href="#Here’s-what-I-came-up-with…" class="headerlink" title="Here’s what I came up with…"></a>Here’s what I came up with…</h2><h3 id="Custom-Events"><a href="#Custom-Events" class="headerlink" title="Custom Events"></a>Custom Events</h3><p>Using <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Creating_and_triggering_events">custom events</a> we can send messages back a forth between the form and the PCF control.</p>
<img src="custom-events.svg" width="50%" class="mini-lightbox" />

<p>The basic example I’ll be using for this blog post is linked to the issue where we are not able to bind to the OOTB address fields on entities like contact and account. Here’s the <a target="_blank" rel="noopener" href="https://powerusers.microsoft.com/t5/Power-Apps-Ideas/Enable-binding-to-OOB-Address-Fields/idi-p/302387"><em>Idea</em></a> I raised on the Power Apps community forums back in the summer of 2019 (a year ago!!!).</p>
<p>I’ll assume you already have the beginnings of a JavaScript web resource with the <code>OnLoad</code> form event wired up, and a PCF Control project.</p>
<p>So, it’s all pretty simple really. Firstly we need to “dispatch” our event. I’ll be doing this when a user selects an address from a <code>ComboBox</code> after searching by post code…</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> addresslistComboBox_onChange(event: React.FormEvent&lt;IComboBox&gt;, option?: IComboBoxOption | <span class="literal">undefined</span>, index?: <span class="built_in">number</span> | <span class="literal">undefined</span>, value?: <span class="built_in">string</span> | <span class="literal">undefined</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> selectedAddress = <span class="built_in">JSON</span>.parse(option?.data);</span><br><span class="line">    <span class="keyword">const</span> attributeName = <span class="built_in">this</span>.props.context.parameters.postalcode.attributes?.LogicalName;</span><br><span class="line">    <span class="keyword">const</span> customEvent = <span class="keyword">new</span> CustomEvent(<span class="string">&quot;onReceiveAddress&quot;</span>, &#123;</span><br><span class="line">        detail: &#123;</span><br><span class="line">            Address: selectedAddress,</span><br><span class="line">            Attribute: attributeName</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">as</span> CustomEventInit&lt;EventData&gt;);</span><br><span class="line">    <span class="built_in">window</span>.dispatchEvent(customEvent);</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">        addresslistHidden: <span class="literal">true</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Then all we need is to wire up a “listener” to listen within our form script for the event and handle it…</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.parent.addEventListener(</span><br><span class="line">  <span class="string">&quot;onReceiveAddress&quot;</span>,</span><br><span class="line">  (ev: CustomEvent&lt;EventData&gt;) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (ev.detail) &#123;</span><br><span class="line">      <span class="keyword">if</span> (ev.detail.Attribute === <span class="string">&quot;address1_postalcode&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> address = ev.detail.Address;</span><br><span class="line">        formContext.getAttribute(<span class="string">&quot;address1_line1&quot;</span>).setValue(address.line_1);</span><br><span class="line">        formContext.getAttribute(<span class="string">&quot;address1_line2&quot;</span>).setValue(address.line_2);</span><br><span class="line">        formContext.getAttribute(<span class="string">&quot;address1_line3&quot;</span>).setValue(address.line_3);</span><br><span class="line">        formContext</span><br><span class="line">          .getAttribute(<span class="string">&quot;address1_city&quot;</span>)</span><br><span class="line">          .setValue(address.town_or_city);</span><br><span class="line">        formContext.getAttribute(<span class="string">&quot;address1_county&quot;</span>).setValue(address.county);</span><br><span class="line">        formContext.getAttribute(<span class="string">&quot;address1_country&quot;</span>).setValue(address.country);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><em>Note when adding the event listener in the form script we must use <code>window.parent</code>, this is because in the Unified Interface custom form script web resources are all loaded within an iframe. Whereas the PCF control is rendered directly in the main document.</em></p>
<p>Pretty neat! So no duplicate fields to allow me to bind my control and no WebApi Updates directly from the control. Using this method we can update any field from our control without the need to bind at design time.</p>
<p>If your interested in having a look at the full source code I’ve uploaded it to <a target="_blank" rel="noopener" href="https://github.com/OliverFlint/PCF-UK-Address-Lookup">github</a></p>
<p>So Long, and Thanks for All the Fish</p>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the comments.</noscript>
        </div>
    </div>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/categories/">Categories</a></li>
         
          <li><a href="/archives/">Archive</a></li>
         
          <li><a href="/Me/">Me</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Communication"><span class="toc-number">1.</span> <span class="toc-text">Communication</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#I-want-better-comms"><span class="toc-number">2.</span> <span class="toc-text">I want better comms!</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Here%E2%80%99s-what-I-came-up-with%E2%80%A6"><span class="toc-number">3.</span> <span class="toc-text">Here’s what I came up with…</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Custom-Events"><span class="toc-number">3.1.</span> <span class="toc-text">Custom Events</span></a></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://www.oliverflint.co.uk/2020/06/06/PCF-and-Form-Communication/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://www.oliverflint.co.uk/2020/06/06/PCF-and-Form-Communication/&text=PCF &lt;-&gt; Form Communication"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://www.oliverflint.co.uk/2020/06/06/PCF-and-Form-Communication/&title=PCF &lt;-&gt; Form Communication"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://www.oliverflint.co.uk/2020/06/06/PCF-and-Form-Communication/&is_video=false&description=PCF &lt;-&gt; Form Communication"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=PCF &lt;-&gt; Form Communication&body=Check out this article: http://www.oliverflint.co.uk/2020/06/06/PCF-and-Form-Communication/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://www.oliverflint.co.uk/2020/06/06/PCF-and-Form-Communication/&title=PCF &lt;-&gt; Form Communication"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://www.oliverflint.co.uk/2020/06/06/PCF-and-Form-Communication/&title=PCF &lt;-&gt; Form Communication"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://www.oliverflint.co.uk/2020/06/06/PCF-and-Form-Communication/&title=PCF &lt;-&gt; Form Communication"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://www.oliverflint.co.uk/2020/06/06/PCF-and-Form-Communication/&title=PCF &lt;-&gt; Form Communication"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://www.oliverflint.co.uk/2020/06/06/PCF-and-Form-Communication/&name=PCF &lt;-&gt; Form Communication&description=Communication, It&#39;s one of the single most important &#34;things&#34; in EVERYTHING! So why am I finding it so difficult to have my PCF control and Form script talk to each other? Maybe I am missing something but I believe the only &#34;OOTB&#34; method for the two to communicate is via a bound field/control...? So, here is my alternative..."><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://www.oliverflint.co.uk/2020/06/06/PCF-and-Form-Communication/&t=PCF &lt;-&gt; Form Communication"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2020-2022
    Oliver Flint
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/categories/">Categories</a></li>
         
          <li><a href="/archives/">Archive</a></li>
         
          <li><a href="/Me/">Me</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->

<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">


<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">


    <!-- jquery -->

<script src="/lib/jquery/jquery.min.js"></script>


<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>

<!-- clipboard -->

  
<script src="/lib/clipboard/clipboard.min.js"></script>

  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-78426300-2"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-78426300-2');
    </script>

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'oliverflintblog';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


    <script src='https://storage.ko-fi.com/cdn/scripts/overlay-widget.js'></script>
    <script>
      kofiWidgetOverlay.draw('oliverflint', {
        'type': 'floating-chat',
        'floating-chat.donateButton.text': 'Support me',
        'floating-chat.donateButton.background-color': '#f45d22',
        'floating-chat.donateButton.text-color': '#fff'
      });
    </script>
  </body>
</html>
